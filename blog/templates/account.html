{% extends 'layout.html' %}

{% block contents %}
	<br />
	{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
		<ul class="flashes">
			{% for category, message in messages %}
				<div class="alert alert-{{category}} alert-dismissible" role="alert">
					{{ message }}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			{% endfor %}
		</ul>
		{% endif %}
	{% endwith %}

	<div class="card">
		<div class="card-header">
			Account Details
		</div>
		<div class="card-body">
		  <h5 class="card-title">Hello <strong>{{current_user.name}}</strong></h5>
		  <br />
		  <div class="card-text">
			<div><strong>User Id: </strong>{{current_user.id}}</div>
			<div><strong>Name: </strong>{{current_user.name}}</div>
			<div><strong>Email: </strong>{{current_user.email}}</div>
			<br />
		  </div>
		</div>
	</div>
	<br />
	<strong>You can update your details here</strong>
	<form action="" method="post">
		{{ form.csrf_token }}

		<div class="form-floating">
			{{ form.name() }} {{ form.name.label }}
			<br />
			{% if form.name.errors %}
				{% for error in form.name.errors %}
					<div class="text-danger"> {{ error }} </div> <br />
				{% endfor %}
			{% endif %}
		</div>

		<div class="form-floating">
			{{ form.email() }} {{ form.email.label }}
			<br />
			{% if form.email.errors %}
				{% for error in form.email.errors %}
					<div class="text-danger"> {{ error }} </div> <br />
				{% endfor %}
			{% endif %}
		</div>

		<div id="success"></div>
		{{ form.submit() }}
	</form>

{% endblock contents %}