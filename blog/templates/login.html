{% extends 'layout.html' %}

{% block contents %}
<div class="container-fluid col-md-4">
	{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
		<ul class="flashes">
			{% for category, message in messages %}
			<div class="alert alert-{{category}}" role="alert">
				<div class="alert alert-warning alert-dismissible fade show" role="alert">
					{{ message }}
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			</div>
			{% endfor %}
		</ul>
		{% endif %}
	{% endwith %}

	<h3>Login Page</h3> <br />
	<form action="" method="post">
		{{ form.csrf_token }}

		<div class="form-floating">
			{{ form.email() }} {{ form.email.label }} <br />
			{% if form.email.errors %}
				{% for error in form.email.errors %}
					<div class="text-danger"> {{ error }} </div> <br />
				{% endfor %}
			{% endif %}
		</div>

		<div class="form-floating">
			{{ form.password() }} {{ form.password.label }} <br />
			{% if form.password.errors %}
				{% for error in form.password.errors %}
					<div class="text-danger"> {{ error }} </div> <br />
				{% endfor %}
			{% endif %}
		</div>

		<div id="form-check">
			{{ form.remember() }} {{ form.remember.label }}
		</div> <br />

		<div id="success">{{ form.submit() }}</div>
	</form>

	{% if 'admin' is not in request.url %}
		<br />
		<p class="small">Don't have an account
			<a href="{{url_for('register')}}">Create a Account</a>
		</p>
	{% endif %}
</div>
{% endblock contents %}